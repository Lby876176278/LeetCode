<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
    /**
     * @param {string} S
     * @return {string}
     */
    var removeOuterParentheses = function(S) {
        var parenthesesMap = {
            '(': 0,
            ')': 0
        };

        var start, end, str = '';

        Array.prototype.forEach.call(S, (letter, index) => {
            if (letter === '(') {
                if (parenthesesMap['('] === 0) start = index;
                parenthesesMap['('] += 1;
            } else {
                parenthesesMap[')'] += 1;
                if (parenthesesMap['('] === parenthesesMap[')']) {
                    end = index;
                    parenthesesMap['('] = 0;
                    parenthesesMap[')'] = 0;
                    if (start + 1 !== end) str += S.substring(start + 1, end)
                }
            }
        })

        return str;
    };
    </script>
    <script>
    /**
     * @param {string} S
     * @return {string}
     */
    var removeOuterParentheses = function(S) {
        let ans = "",
            n1 = 0,
            n2 = 0;
        for (i = 0; i < S.length; i++) {
            if (S[i] == '(') {
                n1++;
            } else {
                n2++;
                if (n1 == n2) {
                    ans += S.slice(i - (n1 + n1 - 2), i);
                    n1 = 0;
                    n2 = 0;
                }
            }
        }
        return ans;
    };
    </script>
</body>

</html>